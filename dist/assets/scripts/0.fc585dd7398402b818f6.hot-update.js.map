{"version":3,"sources":["webpack:///./app/blocks/index/index.js?c3de"],"names":["selectors","area","startGame","itemArea","counter","empty","activeItem","allItemArea","document","querySelectorAll","querySelector","random","min","max","Math","round","createRandomArr","arr","randInt","i","number","indexOf","push","matrixGen","row","col","option","arrMain","numberCells","rowArr","j","undefined","getValuesAroundEmpty","matrixWidth","matrix","forEach","rowMatrix","emptyId","length","replaceTargetOnEmpty","target","val","Number","getAttribute","item","itemMove","emptyItem","setAttribute","innerHTML","classList","add","remove","removeActiveItems","selectorItem","classActive","activeItems","addActiveItems","arrItems","element","areaGenerate","areaItems","resetGameArea","emptySelector","lastItem","globalState","viewCounter","gameProcessEvent","items","gameProcess","removeEventListener","addEventListener","startLogic","areaArr","onClickStartGame"],"mappings":";;;;;;;AACA;;;;AACA;;;;;;AAEA;AAJA;AAKA,KAAMA,YAAY;AACjBC,QAAM,UADW;AAEjBC,aAAW,gBAFM;AAGjBC,YAAU,UAHO;AAIjBC,WAAS,aAJQ;AAKjBC,SAAO,kBALU;AAMjBC,cAAY;AANK,EAAlB;;AASA;AACA,KAAMC,cAAcC,SAASC,gBAAT,CAA0BT,UAAUG,QAApC,CAApB;AACA,KAAMF,OAAOO,SAASE,aAAT,CAAuBV,UAAUC,IAAjC,CAAb;AACA,KAAMG,UAAUI,SAASE,aAAT,CAAuBV,UAAUI,OAAjC,CAAhB;;AAEA;AACA,KAAMO,SAAS,SAATA,MAAS,CAACC,GAAD,EAAMC,GAAN,EAAc;AAC5B,SAAOC,KAAKC,KAAL,CAAWH,MAAM,GAAN,GAAYE,KAAKH,MAAL,MAAiBE,MAAMD,GAAN,GAAY,CAA7B,CAAvB,CAAP;AACA,EAFD;;AAIA,KAAMI,kBAAkB,SAAlBA,eAAkB,SAAU;AACjC,MAAMC,MAAM,EAAZ;AACA,MAAIC,gBAAJ;;AAEA,OAAK,IAAIC,IAAI,CAAb,EAAgBA,KAAKC,MAArB,EAA6BD,GAA7B,EAAkC;;AAEjC,MAAG;AACFD,cAAUP,OAAO,CAAP,EAAUS,MAAV,CAAV;AACA,IAFD,QAESH,IAAII,OAAJ,CAAYH,OAAZ,MAAyB,CAAC,CAFnC;;AAIAD,OAAIK,IAAJ,CAASJ,OAAT;AACA;AACD,SAAOD,GAAP;AACA,EAbD;;AAeA;;;;;;;;;AASA,KAAMM,YAAY,SAAZA,SAAY,CAACC,GAAD,EAAMC,GAAN,EAAWC,MAAX,EAAsB;AACvC,MAAMC,UAAU,EAAhB;AACA,MAAMC,cAAcJ,MAAMC,GAA1B;;AAEA,OAAK,IAAIN,IAAI,CAAb,EAAgBA,KAAKM,MAAM,CAA3B,EAA8BN,GAA9B,EAAmC;AAClC,OAAMU,SAAS,EAAf;;AAEA,QAAK,IAAIC,IAAI,CAAb,EAAgBA,KAAKN,GAArB,EAA0BM,GAA1B,EAA+B;;AAE9B,QAAIJ,WAAW,UAAX,IAAyBI,IAAIX,IAAIK,GAAR,KAAgBI,WAA7C,EAA0D;AACzDC,YAAOP,IAAP,CAAYQ,IAAIX,IAAIK,GAApB;AACA,KAFD,MAEO,IAAIE,WAAWK,SAAf,EAA0B;AAChCF,YAAOP,IAAP,CAAY,EAAZ;AACA,KAFM,MAEA,IAAIQ,IAAIX,IAAIK,GAAR,KAAgBI,WAApB,EAAiC;AACvCC,YAAOP,IAAP,CAAYI,OAAOI,IAAIX,IAAIK,GAAR,GAAc,CAArB,CAAZ;AACA,KAFM,MAEA;AACNK,YAAOP,IAAP,CAAY,OAAZ;AACA;AACD;;AAEDK,WAAQL,IAAR,CAAaO,MAAb;AACA;AACD,SAAOF,OAAP;AACA,EAvBD;;AAyBA;AACA,KAAMK,uBAAuB,SAAvBA,oBAAuB,SAAU;AACtC,MAAIR,YAAJ;AACA,MAAIC,YAAJ;AACA,MAAIQ,oBAAJ;AACA,MAAMhB,MAAM,EAAZ;;AAEAiB,SAAOC,OAAP,CAAe,UAACC,SAAD,EAAYjB,CAAZ,EAAkB;AAChC,OAAMkB,UAAUD,UAAUf,OAAV,CAAkB,OAAlB,CAAhB;AACA,OAAIgB,YAAY,CAAC,CAAjB,EAAoB;AACnBb,UAAML,CAAN;AACAM,UAAMY,OAAN;AACA;AACDJ,iBAAcG,UAAUE,MAAxB;AACA,GAPD;;AASA,MAAIb,QAAQ,CAAZ,EAAe;AACdR,OAAIK,IAAJ,CAASY,OAAOV,GAAP,EAAYC,MAAM,CAAlB,CAAT;AACA;AACD,MAAID,QAAQ,CAAZ,EAAe;AACdP,OAAIK,IAAJ,CAASY,OAAOV,MAAM,CAAb,EAAgBC,GAAhB,CAAT;AACA;AACD,MAAIA,QAAQQ,cAAc,CAA1B,EAA6B;AAC5BhB,OAAIK,IAAJ,CAASY,OAAOV,GAAP,EAAYC,MAAM,CAAlB,CAAT;AACA;AACD,MAAID,QAAQS,cAAc,CAA1B,EAA6B;AAC5BhB,OAAIK,IAAJ,CAASY,OAAOV,MAAM,CAAb,EAAgBC,GAAhB,CAAT;AACA;AACD,SAAOR,GAAP;AACA,EA5BD;;AA8BA;AACA,KAAMsB,uBAAuB,SAAvBA,oBAAuB,CAACC,MAAD,EAASN,MAAT,EAAoB;AAChD,MAAMO,MAAMC,OAAOF,OAAOG,YAAP,CAAoB,UAApB,CAAP,CAAZ;AACA,MAAInB,YAAJ;AACA,MAAIC,YAAJ;;AAEAS,SAAOC,OAAP,CAAe,UAACS,IAAD,EAAOzB,CAAP,EAAa;AAC3B,OAAIyB,KAAKvB,OAAL,CAAa,OAAb,MAA0B,CAAC,CAA/B,EAAkC;AACjCG,UAAML,CAAN;AACAM,UAAMmB,KAAKvB,OAAL,CAAa,OAAb,CAAN;AACA;AACD,GALD;;AAOAa,SAAOC,OAAP,CAAe,UAACS,IAAD,EAAOzB,CAAP,EAAa;AAC3B,OAAIyB,KAAKvB,OAAL,CAAaoB,GAAb,MAAsB,CAAC,CAA3B,EAA8B;AAC7BP,WAAOf,CAAP,EAAUyB,KAAKvB,OAAL,CAAaoB,GAAb,CAAV,IAA+B,OAA/B;AACAP,WAAOV,GAAP,EAAYC,GAAZ,IAAmBgB,GAAnB;AACA;AACA;AACD,GAND;AAOA,EAnBD;;AAqBA,KAAMI,WAAW,SAAXA,QAAW,SAAU;AAC1B,MAAMJ,MAAMC,OAAOF,OAAOG,YAAP,CAAoB,UAApB,CAAP,CAAZ;AACA,MAAMG,YAAYtC,SAASE,aAAT,CAAuB,oBAAvB,CAAlB;;AAEA8B,SAAOO,YAAP,CAAoB,UAApB,EAAgC,OAAhC;AACAP,SAAOQ,SAAP,GAAmB,EAAnB;AACAR,SAAOS,SAAP,CAAiBC,GAAjB,CAAqBlD,UAAUK,KAA/B;;AAEAyC,YAAUC,YAAV,CAAuB,UAAvB,EAAmCN,GAAnC;AACAK,YAAUE,SAAV,GAAsBP,GAAtB;AACAK,YAAUG,SAAV,CAAoBE,MAApB,CAA2BnD,UAAUK,KAArC;AACA,EAXD;;AAaA,KAAM+C,oBAAoB,SAApBA,iBAAoB,CAACC,YAAD,EAAeC,WAAf,EAA+B;AACxD,MAAMC,cAAc/C,SAASC,gBAAT,CAA0B4C,YAA1B,CAApB;AACA,yBAAQE,WAAR,EAAqB,gBAAQ;AAC5BX,QAAKK,SAAL,CAAeE,MAAf,CAAsBG,WAAtB;AACA,GAFD;AAGA,EALD;;AAOA,KAAME,iBAAiB,SAAjBA,cAAiB,CAACC,QAAD,EAAWH,WAAX,EAA2B;AACjDG,WAAStB,OAAT,CAAiB,gBAAQ;AACxB,OAAMuB,UAAUlD,SAASE,aAAT,CAAuB,gBAAgBkC,IAAhB,GAAuB,IAA9C,CAAhB;AACAc,WAAQT,SAAR,CAAkBC,GAAlB,CAAsBI,WAAtB;AACA,GAHD;AAIA,EALD;;AAOA,KAAMK,eAAe,SAAfA,YAAe,CAACC,SAAD,EAAY3C,GAAZ,EAAoB;AACxC,yBAAQ2C,SAAR,EAAmB,UAAChB,IAAD,EAAOzB,CAAP,EAAa;AAC/ByB,QAAKG,YAAL,CAAkB,UAAlB,EAA8B9B,IAAIE,CAAJ,CAA9B;AACAyB,QAAKI,SAAL,GAAiB/B,IAAIE,CAAJ,CAAjB;;AAEA,OAAIA,MAAM,EAAV,EAAc;AACbyB,SAAKG,YAAL,CAAkB,UAAlB,EAA8B,OAA9B;AACAH,SAAKI,SAAL,GAAiB,EAAjB;AACA;AACD,GARD;AASA,EAVD;;AAYA,KAAMa,gBAAgB,SAAhBA,aAAgB,CAACC,aAAD,EAAgBT,YAAhB,EAAiC;AACtDD,oBAAkBpD,UAAUG,QAA5B,EAAsCH,UAAUM,UAAhD;AACA,MAAMD,QAAQG,SAASE,aAAT,CAAuB,MAAMV,UAAUK,KAAvC,CAAd;AACA,MAAM0D,WAAWvD,SAASE,aAAT,CAAuB2C,eAAe,aAAtC,CAAjB;;AAEAhD,QAAM4C,SAAN,CAAgBE,MAAhB,CAAuBW,aAAvB;AACAC,WAASd,SAAT,CAAmBC,GAAnB,CAAuBY,aAAvB;AACA,EAPD;;AASA,KAAME,cAAc;AACnB9B,UAAQ,EADW;AAEnB9B,WAAS;AAFU,EAApB;;AAKA,KAAM6D,cAAc,SAAdA,WAAc,GAAM,CAEzB,CAFD;;AAIA,KAAMC,mBAAmB,SAAnBA,gBAAmB,OAAQ;AAChC,MAAM1B,SAASI,KAAKJ,MAApB;;AAEAD,uBAAqBC,MAArB,EAA6BwB,YAAY9B,MAAzC;AACAW,WAASL,MAAT;AACAY,oBAAkBpD,UAAUG,QAA5B,EAAsCH,UAAUM,UAAhD;;AAEA,MAAM6D,QAAQnC,qBAAqBgC,YAAY9B,MAAjC,CAAd;AACAsB,iBAAeW,KAAf,EAAsBnE,UAAUM,UAAhC;;AAEA0D,cAAY5D,OAAZ,IAAuB,CAAvB;AACA,EAXD;;AAaA,KAAMgE,cAAc,SAAdA,WAAc,SAAU;AAC7B,MAAMb,cAAcvB,qBAAqBE,MAArB,CAApB;AACAsB,iBAAeD,WAAf,EAA4BvD,UAAUM,UAAtC;AACA0D,cAAY5D,OAAZ,GAAsB,CAAtB;;AAEAH,OAAKoE,mBAAL,CAAyB,OAAzB,EAAkCH,gBAAlC;AACAjE,OAAKqE,gBAAL,CAAsB,OAAtB,EAA+BJ,gBAA/B;AACA,EAPD;;AASA;AACA,KAAMK,aAAa,SAAbA,UAAa,GAAM;AACxB,MAAMC,UAAUxD,gBAAgB,EAAhB,CAAhB;AACA,MAAMkB,SAASX,UAAU,CAAV,EAAa,CAAb,EAAgBiD,OAAhB,CAAf;AACAb,eAAapD,WAAb,EAA0BiE,OAA1B;AACAX,gBAAc7D,UAAUK,KAAxB,EAA+BL,UAAUG,QAAzC;AACAiE,cAAYlC,MAAZ;;AAEA8B,cAAY9B,MAAZ,GAAqBA,MAArB;AACA,EARD;;AAUA;AACA,KAAMuC,mBAAmB,SAAnBA,gBAAmB;AAAA,SAAM,yBAAUzE,UAAUE,SAApB,EAA+B,OAA/B,EAAwCqE,UAAxC,CAAN;AAAA,EAAzB;;AAEA;AACAE,oB","file":"0.fc585dd7398402b818f6.hot-update.js","sourcesContent":["// Утилиты\r\nimport bindEvent from '../../scripts/util/event/bindEvent';\r\nimport forEach from '../../scripts/util/array/forEach';\r\n\r\n// Объект с классами и идентификаторами\r\nconst selectors = {\r\n\tarea: '.js-area',\r\n\tstartGame: '.js-start-game',\r\n\titemArea: '.js-item',\n\tcounter: '.js-counter',\n\tempty: 'area__item_empty',\r\n\tactiveItem: 'area__item_active'\n};\r\n\r\n// Селекторы\r\nconst allItemArea = document.querySelectorAll(selectors.itemArea);\r\nconst area = document.querySelector(selectors.area);\r\nconst counter = document.querySelector(selectors.counter);\r\n\r\n// functions\r\nconst random = (min, max) => {\r\n\treturn Math.round(min - 0.5 + Math.random() * (max - min + 1));\r\n};\r\n\r\nconst createRandomArr = number => {\r\n\tconst arr = [];\r\n\tlet randInt;\r\n\r\n\tfor (let i = 1; i <= number; i++) {\r\n\r\n\t\tdo {\r\n\t\t\trandInt = random(1, number);\r\n\t\t} while (arr.indexOf(randInt) !== -1);\r\n\r\n\t\tarr.push(randInt);\r\n\t}\r\n\treturn arr;\r\n};\n\r\n/*\r\n---- matrixGen ----\r\nrow - количество строк матрицы;\r\ncol - количество столбцов матрицы;\r\noption:\r\n\tundefined - вернет пустую матрицу;\r\n\t'validate' - вернет заполненную матрицу с числовыми значениями по порядку в сооответствии с количеством ячеек, последняя будет 'empty';\r\n\tArray - передать одномерный массив, для преобразования в матрицу;\r\n*/\r\nconst matrixGen = (row, col, option) => {\r\n\tconst arrMain = [];\r\n\tconst numberCells = row * col;\r\n\r\n\tfor (let i = 0; i <= col - 1; i++) {\r\n\t\tconst rowArr = [];\r\n\r\n\t\tfor (let j = 1; j <= row; j++) {\r\n\r\n\t\t\tif (option === 'validate' && j + i * row !== numberCells) {\r\n\t\t\t\trowArr.push(j + i * row);\r\n\t\t\t} else if (option === undefined) {\r\n\t\t\t\trowArr.push('');\r\n\t\t\t} else if (j + i * row !== numberCells) {\r\n\t\t\t\trowArr.push(option[j + i * row - 1]);\r\n\t\t\t} else {\r\n\t\t\t\trowArr.push('empty');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tarrMain.push(rowArr);\r\n\t}\r\n\treturn arrMain;\r\n};\r\n\r\n// getValuesAroundEmpty - возвращает массив из доступных для перемещения пятнашек\r\nconst getValuesAroundEmpty = matrix => {\r\n\tlet row;\r\n\tlet col;\r\n\tlet matrixWidth;\r\n\tconst arr = [];\r\n\r\n\tmatrix.forEach((rowMatrix, i) => {\r\n\t\tconst emptyId = rowMatrix.indexOf('empty');\r\n\t\tif (emptyId !== -1) {\r\n\t\t\trow = i;\r\n\t\t\tcol = emptyId;\r\n\t\t}\r\n\t\tmatrixWidth = rowMatrix.length;\r\n\t});\r\n\r\n\tif (col !== 0) {\r\n\t\tarr.push(matrix[row][col - 1]);\r\n\t}\r\n\tif (row !== 0) {\r\n\t\tarr.push(matrix[row - 1][col]);\r\n\t}\r\n\tif (col !== matrixWidth - 1) {\r\n\t\tarr.push(matrix[row][col + 1]);\r\n\t}\r\n\tif (row !== matrixWidth - 1) {\r\n\t\tarr.push(matrix[row + 1][col]);\r\n\t}\r\n\treturn arr;\r\n};\r\n\r\n// Замена значения target элемента на empty, а empty на target;\r\nconst replaceTargetOnEmpty = (target, matrix) => {\r\n\tconst val = Number(target.getAttribute('data-val'));\r\n\tlet row;\r\n\tlet col;\r\n\r\n\tmatrix.forEach((item, i) => {\r\n\t\tif (item.indexOf('empty') !== -1) {\r\n\t\t\trow = i;\r\n\t\t\tcol = item.indexOf('empty');\r\n\t\t}\r\n\t});\r\n\r\n\tmatrix.forEach((item, i) => {\r\n\t\tif (item.indexOf(val) !== -1) {\r\n\t\t\tmatrix[i][item.indexOf(val)] = 'empty';\r\n\t\t\tmatrix[row][col] = val;\r\n\t\t\treturn;\r\n\t\t}\r\n\t});\r\n};\r\n\r\nconst itemMove = target => {\r\n\tconst val = Number(target.getAttribute('data-val'));\r\n\tconst emptyItem = document.querySelector('[data-val=\"empty\"]');\r\n\r\n\ttarget.setAttribute('data-val', 'empty');\r\n\ttarget.innerHTML = '';\r\n\ttarget.classList.add(selectors.empty);\r\n\r\n\temptyItem.setAttribute('data-val', val);\r\n\temptyItem.innerHTML = val;\r\n\temptyItem.classList.remove(selectors.empty);\r\n};\r\n\r\nconst removeActiveItems = (selectorItem, classActive) => {\r\n\tconst activeItems = document.querySelectorAll(selectorItem);\r\n\tforEach(activeItems, item => {\r\n\t\titem.classList.remove(classActive);\r\n\t});\r\n};\r\n\r\nconst addActiveItems = (arrItems, classActive) => {\r\n\tarrItems.forEach(item => {\r\n\t\tconst element = document.querySelector('[data-val=\"' + item + '\"]');\r\n\t\telement.classList.add(classActive);\r\n\t});\r\n};\r\n\r\nconst areaGenerate = (areaItems, arr) => {\r\n\tforEach(areaItems, (item, i) => {\r\n\t\titem.setAttribute('data-val', arr[i]);\r\n\t\titem.innerHTML = arr[i];\r\n\r\n\t\tif (i === 15) {\r\n\t\t\titem.setAttribute('data-val', 'empty');\r\n\t\t\titem.innerHTML = '';\r\n\t\t}\r\n\t});\r\n};\r\n\r\nconst resetGameArea = (emptySelector, selectorItem) => {\r\n\tremoveActiveItems(selectors.itemArea, selectors.activeItem);\r\n\tconst empty = document.querySelector('.' + selectors.empty);\r\n\tconst lastItem = document.querySelector(selectorItem + ':last-child');\r\n\r\n\tempty.classList.remove(emptySelector);\r\n\tlastItem.classList.add(emptySelector);\r\n};\r\n\r\nconst globalState = {\r\n\tmatrix: [],\r\n\tcounter: 0\r\n};\r\n\r\nconst viewCounter = () => {\r\n\r\n};\r\n\r\nconst gameProcessEvent = item => {\r\n\tconst target = item.target;\r\n\r\n\treplaceTargetOnEmpty(target, globalState.matrix);\r\n\titemMove(target);\r\n\tremoveActiveItems(selectors.itemArea, selectors.activeItem);\r\n\r\n\tconst items = getValuesAroundEmpty(globalState.matrix);\r\n\taddActiveItems(items, selectors.activeItem);\r\n\r\n\tglobalState.counter += 1;\r\n};\r\n\r\nconst gameProcess = matrix => {\r\n\tconst activeItems = getValuesAroundEmpty(matrix);\r\n\taddActiveItems(activeItems, selectors.activeItem);\r\n\tglobalState.counter = 0;\r\n\r\n\tarea.removeEventListener('click', gameProcessEvent);\r\n\tarea.addEventListener('click', gameProcessEvent);\r\n};\r\n\r\n// Запуск игровой логики при клике на кнопку \"Start Game\"\r\nconst startLogic = () => {\r\n\tconst areaArr = createRandomArr(15);\r\n\tconst matrix = matrixGen(4, 4, areaArr);\r\n\tareaGenerate(allItemArea, areaArr);\r\n\tresetGameArea(selectors.empty, selectors.itemArea);\r\n\tgameProcess(matrix);\n\r\n\tglobalState.matrix = matrix;\r\n};\r\n\r\n// События\r\nconst onClickStartGame = () => bindEvent(selectors.startGame, 'click', startLogic);\r\n\r\n// Инициализация событий\r\nonClickStartGame();\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./app/blocks/index/index.js\n **/"],"sourceRoot":""}